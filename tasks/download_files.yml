---
- name: Validate that we have a download_folder
  fail:
    msg: "Please specify a local download folder: -e download_folder=<local download folder>"
  when: download_folder is not defined

- name: Examine result passed in
  debug:
    var: result.files

- name: Download files
  fetch:
    src: "{{ item.path }}"
    dest: "{{ download_folder }}"
  with_items: "{{ result.files }}"
  when: result is defined
